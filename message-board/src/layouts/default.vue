<template>
  <header class="header">
    <div class="header-wrap">
      <!-- logo -->
      <div class="logo">
        <svg
          t="1683614889525"
          class="icon"
          viewBox="0 0 1024 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          p-id="1584"
          width="48"
          height="48"
        >
          <path
            d="M37.9392 177.9712h948.1216v796.9792H37.9392z"
            fill="#F7F2EB"
            p-id="1585"
          ></path>
          <path
            d="M986.0608 982.6304H37.9392a7.68 7.68 0 0 1-7.68-7.68V177.9712a7.68 7.68 0 0 1 7.68-7.68h948.1216a7.68 7.68 0 0 1 7.68 7.68v796.9792a7.68 7.68 0 0 1-7.68 7.68z m-940.4416-15.36h932.7616V185.6512H45.6192z"
            fill="#87ceeb"
            p-id="1586"
          ></path>
          <path
            d="M115.5584 243.2512h792.8832v666.4704H115.5584z"
            fill="#FFFFFF"
            p-id="1587"
          ></path>
          <path
            d="M908.4416 917.4016H115.5584a7.68 7.68 0 0 1-7.68-7.68V243.2512a7.68 7.68 0 0 1 7.68-7.68h792.8832a7.68 7.68 0 0 1 7.68 7.68v666.4704a7.68 7.68 0 0 1-7.68 7.68z m-785.2032-15.36h777.5232V250.88H123.2384z"
            fill="#87ceeb"
            p-id="1588"
          ></path>
          <path
            d="M678.5536 340.0704l-41.1136 70.656 26.2144 62.208-82.6368 34.816-0.6144 1.0752 191.5392 111.4112 98.1504-168.704-191.5392-111.4624z"
            fill="#FFFFFF"
            p-id="1589"
          ></path>
          <path
            d="M771.9424 627.9168a7.5776 7.5776 0 0 1-3.84-1.024l-191.5904-111.4624a7.7312 7.7312 0 0 1-2.7648-10.24l0.6656-1.0752a7.68 7.68 0 0 1 3.6352-3.2256l75.52-31.7952-23.1936-55.3984a7.6288 7.6288 0 0 1 0.4608-6.8096l40.96-70.656a7.6288 7.6288 0 0 1 10.496-2.7648l191.6928 111.4112a7.68 7.68 0 0 1 3.5328 4.7104 7.5264 7.5264 0 0 1-0.768 5.8368l-98.1504 168.96a7.6288 7.6288 0 0 1-6.656 3.5328zM596.736 509.44l172.4416 100.3008 90.4192-155.4432-178.2784-103.68-35.328 60.672L670.72 469.9648a7.68 7.68 0 0 1-4.096 10.24z"
            fill="#87ceeb"
            p-id="1590"
          ></path>
          <path
            d="M383.616 379.05408L587.8784 293.0176l75.76064 179.87072-204.26752 86.03648z"
            fill="#FFFFFF"
            p-id="1591"
          ></path>
          <path
            d="M459.3664 566.6304a7.936 7.936 0 0 1-2.8672-0.5632 7.7312 7.7312 0 0 1-4.1984-4.1472l-75.776-179.8656a7.68 7.68 0 0 1 4.1472-10.24l204.2368-86.016a7.68 7.68 0 0 1 10.24 4.096L670.72 469.9648a7.4752 7.4752 0 0 1 0 5.8368 7.5776 7.5776 0 0 1-4.1472 4.1984l-204.2368 86.016a7.7824 7.7824 0 0 1-2.9696 0.6144zM393.6768 383.1296l69.7856 165.7856 190.1056-80.0768L583.68 303.104zM749.9776 185.6512h-476.16a7.68 7.68 0 0 1-3.6864-14.4384L508.3648 42.2912a7.6288 7.6288 0 0 1 7.2704 0l238.0288 128.9216a7.68 7.68 0 0 1-3.6864 14.4384z m-445.44-15.36h415.4368L512 57.7536z"
            fill="#87ceeb"
            p-id="1592"
          ></path>
          <path
            d="M199.7824 625.7152h416.0512v222.2592H199.7824z"
            fill="#FFFFFF"
            p-id="1593"
          ></path>
          <path
            d="M615.8336 855.6544H199.68a7.68 7.68 0 0 1-7.68-7.68v-222.2592a7.68 7.68 0 0 1 7.68-7.68h416.0512a7.68 7.68 0 0 1 7.68 7.68v222.2592a7.68 7.68 0 0 1-7.5776 7.68z m-408.3712-15.36h400.6912v-206.8992H207.4624z"
            fill="#87ceeb"
            p-id="1594"
          ></path>
          <path
            d="M392.96 695.9616H273.8176a7.68 7.68 0 1 1 0-15.36h119.1424a7.68 7.68 0 0 1 0 15.36zM467.3536 744.4992H348.16a7.68 7.68 0 0 1 0-15.36h119.1936a7.68 7.68 0 0 1 0 15.36zM541.7984 793.088H422.656a7.68 7.68 0 1 1 0-15.36h119.1424a7.68 7.68 0 1 1 0 15.36z"
            fill="#87ceeb"
            p-id="1595"
          ></path>
          <path
            d="M545.4336 376.1152m-24.4224 0a24.4224 24.4224 0 1 0 48.8448 0 24.4224 24.4224 0 1 0-48.8448 0Z"
            fill="#FFFFFF"
            p-id="1596"
          ></path>
          <path
            d="M545.4848 408.2176a32.1024 32.1024 0 1 1 29.5424-44.544 32.1024 32.1024 0 0 1-29.5424 44.544z m0-48.8448a16.9984 16.9984 0 0 0-6.5024 1.3312 16.7424 16.7424 0 1 0 21.9136 8.9088 16.7936 16.7936 0 0 0-15.4624-10.24z"
            fill="#87ceeb"
            p-id="1597"
          ></path>
          <path
            d="M762.368 531.5072m-24.4224 0a24.4224 24.4224 0 1 0 48.8448 0 24.4224 24.4224 0 1 0-48.8448 0Z"
            fill="#FFFFFF"
            p-id="1598"
          ></path>
          <path
            d="M762.2656 563.6096a32.1024 32.1024 0 0 1-27.648-48.2816A32.1024 32.1024 0 0 1 793.6 523.264a32.1024 32.1024 0 0 1-22.8352 39.2704 32.9216 32.9216 0 0 1-8.4992 1.0752z m0-48.8448a15.36 15.36 0 0 0-4.3008 0.5632 16.6912 16.6912 0 1 0 20.48 11.8784 16.7424 16.7424 0 0 0-16.1792-12.4416z"
            fill="#87ceeb"
            p-id="1599"
          ></path>
        </svg>
        <span class="logo-text">小羊留言板</span>
      </div>
      <!-- nav -->
      <ul class="header-nav">
        <li
          class="header-li"
          v-for="(item, index) in routerStore.nav"
          :key="index"
          :class="routerStore.isActivation(item.isActivation)"
          @click="routerPagesJump(item.path)"
        >
          {{ item.text }}
        </li>
      </ul>
      <!-- 
        登录了: 显示发布留言
        没有登录: 显示登录注册按钮
      -->
      <!-- 登录了 -->
      <template v-if="logonStore.logonState">
        <div class="release-message">
          <svg
            t="1684401657815"
            class="icon"
            viewBox="0 0 1064 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="3059"
            width="32"
            height="32"
          >
            <path
              d="M1037.309504 1024H16.636881c-9.150284 0-16.636881-7.486596-16.636881-16.636881V473.319253c0-9.150284 7.486596-16.636881 16.636881-16.636881h1020.672623c9.150284 0 16.636881 7.486596 16.636881 16.636881v534.87571c0 8.31844-7.486596 15.805037-16.636881 15.805037zM33.273761 990.726239h987.398863V489.956133H33.273761v500.770106z"
              fill="#131313"
              p-id="3060"
            ></path>
            <path
              d="M927.506093 590.609261H109.803412c-9.150284 0-16.636881-7.486596-16.636881-16.636881s7.486596-16.636881 16.636881-16.63688h817.702681c9.150284 0 16.636881 7.486596 16.63688 16.63688s-7.486596 16.636881-16.63688 16.636881zM584.786353 693.75792H116.458164c-9.150284 0-16.636881-7.486596-16.63688-16.63688s7.486596-16.636881 16.63688-16.636881h468.328189c9.150284 0 16.636881 7.486596 16.63688 16.636881s-7.486596 16.636881-16.63688 16.63688zM927.506093 693.75792H690.430544c-9.150284 0-16.636881-7.486596-16.63688-16.63688s7.486596-16.636881 16.63688-16.636881h237.075549c9.150284 0 16.636881 7.486596 16.63688 16.636881s-7.486596 16.636881-16.63688 16.63688zM289.481722 927.506093H116.458164c-9.150284 0-16.636881-7.486596-16.63688-16.636881s7.486596-16.636881 16.63688-16.636881h173.023558c9.150284 0 16.636881 7.486596 16.636881 16.636881s-7.486596 16.636881-16.636881 16.636881zM725.367994 967.434606c-4.15922 0-8.31844-1.663688-11.645817-4.991064l-110.635256-110.635256c-6.654752-6.654752-6.654752-16.636881 0-23.291633 6.654752-6.654752 16.636881-6.654752 23.291633 0l110.635256 110.635256c6.654752 6.654752 6.654752 16.636881 0 23.291633-2.495532 3.327376-7.486596 4.991064-11.645816 4.991064z"
              fill="#131313"
              p-id="3061"
            ></path>
            <path
              d="M613.06905 969.930138c-4.15922 0-8.31844-1.663688-11.645817-4.991064-6.654752-6.654752-6.654752-16.636881 0-23.291633l115.62632-115.62632c6.654752-6.654752 16.636881-6.654752 23.291633 0 6.654752 6.654752 6.654752 16.636881 0 23.291633L624.714866 964.939074c-3.327376 3.327376-7.486596 4.991064-11.645816 4.991064z"
              fill="#131313"
              p-id="3062"
            ></path>
            <path
              d="M422.576767 580.627132L981.575955 21.627945c9.150284-7.486596 23.291633-6.654752 30.778229 2.495532l27.450853 27.450853c9.150284 7.486596 9.982128 21.627945 2.495532 30.778229L483.301381 641.351747l-85.679935 24.95532 24.955321-85.679935z"
              fill="#7BAEEF"
              p-id="3063"
            ></path>
            <path
              d="M397.621446 682.943948c-4.15922 0-8.31844-1.663688-11.645816-4.991064-4.15922-4.15922-5.822908-10.813972-4.159221-16.636881l24.955321-85.679935c0.831844-2.495532 2.495532-4.991064 4.15922-6.654752l558.999188-558.999188 0.831844-0.831844c15.805037-13.309504 39.928513-11.645816 53.238018 4.15922l26.619009 26.619009c14.973193 13.309504 17.468725 37.432981 4.15922 53.238018 0 0.831844-0.831844 0.831844-0.831844 0.831844L495.779041 652.997563c-1.663688 1.663688-4.15922 3.327376-7.486596 4.15922l-85.679935 24.955321c-1.663688 0.831844-3.327376 0.831844-4.991064 0.831844z m39.928513-93.166531l-15.805036 52.406174 52.406174-14.973193 555.671811-555.671811c1.663688-2.495532 0.831844-4.991064-0.831844-7.486597l-0.831844-0.831844-27.450853-27.450853-0.831844-0.831844c-1.663688-2.495532-4.991064-2.495532-7.486596-0.831844L437.549959 589.777417z"
              fill="#131313"
              p-id="3064"
            ></path>
            <path
              d="M855.135662 382.648253c-4.15922 0-8.31844-1.663688-11.645816-4.991064-6.654752-6.654752-6.654752-16.636881 0-23.291633l149.731925-149.731925L895.896019 108.139724c-6.654752-6.654752-6.654752-16.636881 0-23.291633 6.654752-6.654752 16.636881-6.654752 23.291633 0l108.971568 108.971568c3.327376 3.327376 4.991064 7.486596 4.991064 11.645816 0 4.15922-1.663688 8.31844-4.991064 11.645817l-161.377742 161.377741c-3.327376 2.495532-7.486596 4.15922-11.645816 4.15922z"
              fill="#131313"
              p-id="3065"
            ></path>
          </svg>
          <!-- 盒子 -->
          <div class="release-message-wrap">
            <div class="title">小羊QAQ</div>
            <ul>
              <li>个人中心</li>
              <li>发布留言</li>
              <li>发布照片</li>
              <li>发布内容管理</li>
              <li>退出登录</li>
            </ul>
          </div>
        </div>
        <!-- <div
          @click="messageStore.changeReleaseMessagecontroller"
        >
          发布留言
        </div> -->
      </template>
      <template v-else>
        <!-- 登录注册 -->
        <div class="photo" @click="logonStore.changeLogonWrapController">
          <svg
            t="1684046577588"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="1549"
            width="32"
            height="32"
          >
            <path
              d="M511.913993 941.605241c-255.612968 0-385.311608-57.452713-385.311608-170.810012 0-80.846632 133.654964-133.998992 266.621871-151.88846L393.224257 602.049387c-79.986561-55.904586-118.86175-153.436587-118.86175-297.240383 0-139.33143 87.211154-222.586259 233.423148-222.586259l7.912649 0c146.211994 0 233.423148 83.254829 233.423148 222.586259 0 54.184445 0 214.67361-117.829666 297.412397l-0.344028 16.685369c132.966907 18.061482 266.105829 71.041828 266.105829 151.716445C897.225601 884.152528 767.526961 941.605241 511.913993 941.605241zM507.957668 141.567613c-79.470519 0-174.250294 28.382328-174.250294 163.241391 0 129.698639 34.230808 213.469511 104.584579 255.784982 8.944734 5.332437 14.277171 14.965228 14.277171 25.286074l0 59.344868c0 15.309256-11.524945 28.0383-26.662187 29.414413-144.319839 14.449185-239.959684 67.429531-239.959684 95.983874 0 92.199563 177.346548 111.637158 325.966739 111.637158 148.792206 0 325.966739-19.26558 325.966739-111.637158 0-28.726356-95.639845-81.534688-239.959684-95.983874-15.48127-1.548127-27.006215-14.621199-26.662187-30.102469l1.376113-59.344868c0.172014-10.148833 5.676466-19.437594 14.277171-24.770032 70.525785-42.487485 103.208466-123.678145 103.208466-255.784982 0-135.031077-94.779775-163.241391-174.250294-163.241391L507.957668 141.567613 507.957668 141.567613z"
              fill="#1296db"
              p-id="1550"
            ></path>
          </svg>
        </div>
      </template>
    </div>

    <!-- 发布留言 -->
    <ReleaseMessage v-if="logonStore.logonState"></ReleaseMessage>
    <!-- 登录 注册 组件 -->
    <LogonWrap v-if="logonStore.logonWarpController"></LogonWrap>
  </header>
  <main>
    <router-view></router-view>
  </main>
</template>

<script setup lang="ts">
import ReleaseMessage from "../components/message/ReleaseMessage.vue";
import LogonWrap from "../components/logon/LogonWrap.vue";
import automaticLogon from "../hooks/automaticLogon";
const logonStore = useLogonStore();
const routerStore = useRouterStore();
const router = useRouter();

// 页面跳转
const routerPagesJump = (path: string) => {
  router.push({ path });
};

// 路由监听
watch(
  () => router.currentRoute.value,
  (newValue, oldValue) => {
    routerStore.nav.forEach((item) => {
      item.isActivation = false;
      if (item.path == newValue.path) {
        item.isActivation = true;
      }
    });
  },
  { immediate: true }
);

// 生命周期
onMounted(() => {
  automaticLogon();
});
</script>

<style scoped lang="sass">
@import url("../style/layouts/default.scss")
</style>
